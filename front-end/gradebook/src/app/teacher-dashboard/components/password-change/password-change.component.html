<h3 class="fw-bold mb-3 text-primary">Change Password</h3>

<div *ngIf="successMessage" class="alert alert-success mb-3">
  {{ successMessage }}
</div>
<div *ngIf="errorMessage" class="alert alert-danger mb-3">
  {{ errorMessage }}
</div>

<form (ngSubmit)="changePassword()">
  <div class="mb-3">
    <label for="currentPassword" class="form-label">Current Password</label>
    <input
      type="password"
      id="currentPassword"
      name="currentPassword"
      class="form-control"
      [(ngModel)]="passwordData.currentPassword"
      required
    />
  </div>

  <div class="mb-3">
    <label for="newPassword" class="form-label">New Password</label>
    <input
      type="password"
      id="newPassword"
      name="newPassword"
      class="form-control"
      [(ngModel)]="passwordData.newPassword"
      required
    />
  </div>

  <div class="mb-3">
    <label for="confirmPassword" class="form-label">Confirm New Password</label>
    <input
      type="password"
      id="confirmPassword"
      name="confirmPassword"
      class="form-control"
      [(ngModel)]="passwordData.confirmPassword"
      required
    />
    <div
      *ngIf="passwordData.confirmPassword && !passwordsMatch"
      class="text-danger mt-2 password-mismatch-error"
    >
      Passwords do not match
    </div>
  </div>

  <button
    type="submit"
    class="btn btn-primary w-100"
    [disabled]="isLoading || !passwordsMatch"
  >
    <span
      *ngIf="isLoading"
      class="spinner-border spinner-border-sm me-2"
      role="status"
      aria-hidden="true"
    ></span>
    {{ isLoading ? "Changing Password..." : "Change Password" }}
  </button>
</form>
