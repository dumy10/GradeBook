<div class="auth-container mx-auto mt-5 p-4 shadow-sm bg-white rounded">
  <header class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold">Teacher Dashboard</h2>
    <button class="btn btn-danger" (click)="logout()">Logout</button>
  </header>

  <ul class="nav nav-tabs justify-content-center mb-4">
    <li class="nav-item">
      <button
        type="button"
        class="nav-link"
        [class.active]="activeTab === 'profile'"
        (click)="changeTab('profile')"
      >
        Profile
      </button>
    </li>
    <li class="nav-item">
      <button
        type="button"
        class="nav-link"
        [class.active]="activeTab === 'password'"
        (click)="changeTab('password')"
      >
        Change Password
      </button>
    </li>
    <li class="nav-item">
      <button
        type="button"
        class="nav-link"
        [class.active]="activeTab === 'classes'"
        (click)="changeTab('classes')"
      >
        Class Management
      </button>
    </li>
    <li class="nav-item">
      <button
        type="button"
        class="nav-link"
        [class.active]="activeTab === 'grades'"
        (click)="changeTab('grades')"
      >
        Grade Management
      </button>
    </li>
  </ul>

  <div class="tab-content">
    <!-- Profile Tab using standalone component -->
    <div *ngIf="activeTab === 'profile'" class="profile-tab">
      <app-profile
        [userInfo]="userInfo"
        [userData]="userData"
        [successMessage]="successMessage"
        [errorMessage]="errorMessage"
        [isLoading]="isLoading"
        (updateProfileEvent)="updateProfile($event)"
      >
      </app-profile>
    </div>

    <!-- Change Password Tab using standalone component -->
    <div *ngIf="activeTab === 'password'" class="password-tab">
      <app-password-change
        [passwordData]="passwordData"
        [successMessage]="successMessage"
        [errorMessage]="errorMessage"
        [isLoading]="isLoading"
        (changePasswordEvent)="changePassword($event)"
      >
      </app-password-change>
    </div>

    <!-- Class Management Tab using standalone component -->
    <div *ngIf="activeTab === 'classes'" class="classes-tab">
      <app-class-management
        [classes]="classes"
        [selectedClass]="selectedClass"
        [studentsInClass]="studentsInClass"
        [searchStudentTerm]="searchStudentTerm"
        [searchClassTerm]="searchClassTerm"
        [searchResults]="searchResults"
        [classLoading]="classLoading"
        [successMessage]="successMessage"
        [errorMessage]="errorMessage"
        (searchClassesEvent)="searchClasses($event)"
        (searchStudentsEvent)="searchStudents()"
        (selectClassEvent)="selectClass($event)"
        (addStudentToClassEvent)="addStudentToClass($event)"
        (removeStudentFromClassEvent)="removeStudentFromClass($event)"
      >
      </app-class-management>
    </div>

    <!-- Grade Management Tab using standalone component -->
    <div *ngIf="activeTab === 'grades'" class="grade-management-tab">
      <app-grade-management
        [selectedClass]="selectedClass"
        [studentsInClass]="studentsInClass"
        [grades]="grades"
        [gradesForClass]="gradesForClass"
        [selectedStudent]="selectedStudent"
        [selectedGrade]="selectedGrade"
        [assignments]="assignments"
        [successMessage]="successMessage"
        [errorMessage]="errorMessage"
        [gradeLoading]="gradeLoading"
        [showGradeModal]="showGradeModal"
        [showEditGradeModal]="showEditGradeModal"
        [showDeleteConfirmation]="showDeleteConfirmation"
        [gradeToDelete]="gradeToDelete"
        [showGradeHistoryModal]="showGradeHistoryModal"
        [selectedGradeHistory]="selectedGradeHistory"
        [showBulkGradeModal]="showBulkGradeModal"
        [showGradeUploadModal]="showGradeUploadModal"
        [showHistoryView]="showHistoryView"
        [bulkGradeForm]="bulkGradeForm"
        [quickGradeEntries]="quickGradeEntries"
        [quickGradeDefaults]="quickGradeDefaults"
        [gradeUploadForm]="gradeUploadForm"
        [newGrade]="newGrade"
        [editGradeForm]="editGradeForm"
        (selectStudentForGradesEvent)="selectStudentForGrades($event)"
        (openNewGradeModalEvent)="openNewGradeModal($event)"
        (closeNewGradeModalEvent)="closeNewGradeModal()"
        (createGradeEvent)="createGrade()"
        (openEditGradeModalEvent)="openEditGradeModal($event)"
        (closeEditGradeModalEvent)="closeEditGradeModal()"
        (updateGradeEvent)="updateGrade()"
        (confirmDeleteGradeEvent)="confirmDeleteGrade($event)"
        (closeDeleteConfirmationEvent)="closeDeleteConfirmation()"
        (deleteGradeEvent)="deleteGrade()"
        (toggleHistoryViewEvent)="toggleHistoryView()"
        (openGradeHistoryModalEvent)="openGradeHistoryModal($event)"
        (closeGradeHistoryModalEvent)="closeGradeHistoryModal()"
        (openBulkGradeModalEvent)="openBulkGradeModal()"
        (closeBulkGradeModalEvent)="closeBulkGradeModal()"
        (toggleAllStudentsEvent)="toggleAllStudents()"
        (bulkFillPointsEvent)="bulkFillPoints()"
        (submitBulkGradesEvent)="submitBulkGrades()"
        (openQuickBulkGradeModalEvent)="openQuickBulkGradeModal()"
        (closeGradeUploadModalEvent)="closeGradeUploadModal()"
        (prepareQuickBulkGradeDataEvent)="prepareQuickBulkGradeData()"
        (toggleAllQuickGradesEvent)="toggleAllQuickGrades()"
        (applyDefaultValuesEvent)="applyDefaultValues()"
        (sortQuickGradesByNameEvent)="sortQuickGradesByName()"
        (submitQuickGradesEvent)="submitQuickGrades()"
        (loadGradesForClassEvent)="loadGradesForClass($event)"
        (checkForExistingGradeEvent)="checkForExistingGrade()"
        (checkPointsRangeEvent)="checkPointsRange()"
        (checkEditPointsRangeEvent)="checkEditPointsRange()"
      >
      </app-grade-management>
    </div>
  </div>
</div>
